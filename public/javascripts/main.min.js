function parseURL(){var e=window.location.hash;return(e=e.split("/")).hash=e[0].substring(1,window.location.hash.length),0<e.length&&(e.anchor=e[1]),e}function scrollTo(){var e=parseURL(),o=$("a[name='"+e.anchor+"']");o.length&&$("html,body").animate({scrollTop:o.offset().top},"slow")}function getDocs(n){$.ajax({method:"GET",url:"/sidebar"}).done(function(e,o){n(e)})}function stripHTML(e){return $(e).text().trim()}function setMetaTags(e){document.title=e.docTitle,$("meta[property='og\\:title']").attr("content",e.docTitle),$("meta[name=title]").attr("content",e.docTitle),160<stripHTML(e.docBody).length?($("meta[property='og\\:description']").attr("content",stripHTML(e.docBody.substring(0,200))),$("meta[name=description]").attr("content",stripHTML(e.docBody.substring(0,200)))):($("meta[property='og\\:description']").attr("content",stripHTML(e.docBody)),$("meta[name=description]").attr("content",stripHTML(e.docBody)))}function populateSideMenu(e){$.each(e,function(e,o){$(".sidebar").append('<li class="list-group-item collection-item sidebarLink"><a href="#'+o.docSlug+'">'+o.docTitle+"</a></li>")})}function populateTopMenu(){$.ajax({method:"GET",url:"/config"}).done(function(e,o){$.each(e.menuItems,function(e,o){$(".nav").append('<li><a href="'+o.menuLink+'">'+o.menuTitle+"</a></li>")})})}$(document).ready(function(){window.location.hash&&$(window).trigger("hashchange"),getDocs(function(e){populateSideMenu(e.docs),$(".navbar-brand, .brand-logo").html(e.config.title),""===window.location.hash&&0<e.docs.length&&(window.location.hash="#"+e.docs[0].docSlug);var n=$(".sidebarLink");populateTopMenu(),$("#searchInput").on("keyup",function(){2<$("#searchInput").val().length?$.ajax({method:"POST",data:{keyword:$("#searchInput").val()},url:"/search"}).done(function(e,o){"success"===o?($(".sidebarLink").remove(),$.each(e,function(e,o){$(".sidebar").append('<li class="list-group-item collection-item sidebarLink"><a href="#'+o.docSlug+'">'+o.docTitle+"</a></li>")})):($(".sidebarLink").remove(),$(".sidebar").append(n))}):($(".sidebarLink").remove(),$(".sidebar").append(n))})}),$(".sidebarToggle").click(function(){$(".sidebar-container").toggleClass("sidebar-container-show")}),$("body").on("click",".sidebarLink a",function(){$(".sidebar-container").toggleClass("sidebar-container-show")})}),$(window).bind("hashchange",function(){scrollTo(),"#"===window.location.hash.trim()||""===window.location.hash.trim()?getDocs(function(e){0<e.docs.length?($("#main").html(e.docs[0].docBody),setMetaTags(e.docs[0]),window.location.hash="#"+e.docs[0].docSlug):$("#main").html("<h3>No docs. Please create some docs.<h3>")}):$.ajax({method:"GET",url:"/doc/"+parseURL().hash}).done(function(e,o){if($("#main").html(e.doc.docBody),setMetaTags(e.doc),e.doc.nextDoc?($("#linkNext a").attr("href","#"+e.doc.nextDoc.docSlug),$("#linkNext a").removeClass("hidden hide")):$("#linkNext a").addClass("hidden hide"),e.doc.prevDoc?($("#linkPrev a").attr("href","#"+e.doc.prevDoc.docSlug),$("#linkPrev a").removeClass("hidden hide")):$("#linkPrev a").addClass("hidden hide"),$("pre code").each(function(e,o){hljs.highlightBlock(o)}),$("img").each(function(e){$(this).parent().addClass("center-align align-center"),$(this).addClass("img-responsive responsive-img")}),e.config.addAnchors){var n=parseURL();$("h1, h2, h3, h4, h5").each(function(e){var o=$(this).text();$(this).html("<a name='"+o+"' href='#"+n.hash+"/"+o+"'>"+o+"</a>")}),scrollTo()}})});